<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <title>Manten UDEC</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="apple-touch-icon" href='{% static "imagenes/logo.png" %}' />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href='{% static "imagenes/logo.png" %}'
    />
    <link rel="stylesheet" href='{% static "css/bootstrap.min.css" %}' />
    <link rel="stylesheet" href='{% static "css/templatemo.css" %}' />
    <link rel="stylesheet" href='{% static "css/custom.css" %}' />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap"
    />
    <link rel="stylesheet" href='{% static "css/fontawesome.min.css" %}' />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg bg-dark navbar-light d-none d-lg-block"
      id="templatemo_nav_top"
    >
      <div class="container text-light">
        <div class="w-100 d-flex justify-content-between">
          <div>
            <i class="fa fa-envelope mx-2"></i>
            <a
              class="navbar-sm-brand text-light text-decoration-none"
              href="mailto:info@company.com"
              >xxnetproshop@gmail.com</a
            >
            <i class="fa fa-phone mx-2"></i>
            <a
              class="navbar-sm-brand text-light text-decoration-none"
              href="tel:010-020-0340"
              >3227007466</a
            >
          </div>
          <div>
            <a class="text-light" href="" target="_blank" rel="sponsored"
              ><i class="fab fa-facebook-f fa-sm fa-fw me-2"></i
            ></a>
            <a class="text-light" href="" target="_blank"
              ><i class="fab fa-instagram fa-sm fa-fw me-2"></i
            ></a>
            <a class="text-light" href="" target="_blank"
              ><i class="fab fa-twitter fa-sm fa-fw me-2"></i
            ></a>
            <a class="text-light" href="" target="_blank"
              ><i class="fab fa-linkedin fa-sm fa-fw"></i
            ></a>
          </div>
        </div>
      </div>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-light shadow">
      <div class="container d-flex justify-content-between align-items-center">
        <a
          class="navbar-brand text-success logo h1 align-self-center"
          href="/gerente"
          >Manten U</a
        >
      </div>
    </nav>

    <div class="container" style="margin-top: 2%">
      <div class="product-list">
        <h1 class="text-center mb-4">Lista de Productos</h1>
        <div class="table-responsive">
          <table class="table table-bordered table-striped">
            <thead class="thead-dark">
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Categoría</th>
                <th class="precio">Valor</th>
                <th>Marca</th>
                <th>Descripción</th>
                <th>Foto</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              {% for producto in productos %}
              <tr>
                <td>{{ producto.idProducto }}</td>
                <td>{{ producto.Nombre }}</td>
                <td>{{ producto.Categoria }}</td>
                <td>{{ producto.Valor }} $</td>
                <td>{{ producto.Marca }}</td>
                <td>{{ producto.Descripcion }}</td>
                <td>
                  {% if producto.Foto %}
                  <img
                    src="{{ producto.Foto.url }}"
                    alt="{{ producto.Nombre }}"
                    width="100"
                  />
                  {% else %} No hay imagen disponible {% endif %}
                </td>
                <td class="acciones">
                  <a
                    class="btn btn-primary btn-editar"
                    data-id="{{ producto.idProducto }}"
                    >Editar</a
                  >
                  <a
                    class="btn btn-danger btn-eliminar"
                    data-id="{{ producto.idProducto }}"
                    >Eliminar</a
                  >
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="text-center my-4">
      <button class="btn btn-success" onclick="window.location.href='/regpro'">
        Registrar Producto
      </button>
    </div>

    <footer class="bg-dark" id="tempaltemo_footer">
      <div class="container">
        <div class="row">
          <div class="col-md-4 pt-5">
            <h2 class="h2 text-success border-bottom pb-3 border-light logo">
              MAnten UDEC
            </h2>
            <ul class="list-unstyled text-light footer-link-list">
              <li>
                <i class="fas fa-map-marker-alt fa-fw"></i>
                sin punto fisico
              </li>
              <li>
                <i class="fa fa-phone fa-fw"></i>
                <a class="text-decoration-none" href="tel:010-020-0340"
                  >3227007466</a
                >
              </li>
              <li>
                <i class="fa fa-envelope fa-fw"></i>
                <a class="text-decoration-none" href="mailto:info@company.com"
                  >xxnetproshop@gmail.com</a
                >
              </li>
            </ul>
          </div>

          <div class="col-md-4 pt-5">
            <h2 class="h2 text-light border-bottom pb-3 border-light">
              Productos
            </h2>
            <ul class="list-unstyled text-light footer-link-list">
              <li><a class="text-decoration-none" href="#">pendiente</a></li>
              <li><a class="text-decoration-none" href="#">pendiente</a></li>
              <li><a class="text-decoration-none" href="#">pendiente</a></li>
              <li><a class="text-decoration-none" href="#">pendiente</a></li>
              <li><a class="text-decoration-none" href="#">pendiente</a></li>
            </ul>
          </div>

          <div class="col-md-4 pt-5">
            <h2 class="h2 text-light border-bottom pb-3 border-light">
              Otros Servicios
            </h2>
            <ul class="list-unstyled text-light footer-link-list">
              <li><a class="text-decoration-none" href="#">Home</a></li>
              <li>
                <a class="text-decoration-none" href="#">Acerca de Nosotros</a>
              </li>
              <li><a class="text-decoration-none" href="#">Contactanos</a></li>
            </ul>
          </div>
        </div>

        <div class="row text-light mb-4">
          <div class="col-12 mb-3">
            <div class="w-100 my-3 border-top border-light"></div>
          </div>
          <div class="col-auto me-auto">
            <ul class="list-inline text-left footer-icons">
              <li
                class="list-inline-item border border-light rounded-circle text-center"
              >
                <a
                  class="text-light text-decoration-none"
                  target="_blank"
                  href="#"
                  ><i class="fab fa-facebook-f fa-lg fa-fw"></i
                ></a>
              </li>
              <li
                class="list-inline-item border border-light rounded-circle text-center"
              >
                <a
                  class="text-light text-decoration-none"
                  target="_blank"
                  href="#"
                  ><i class="fab fa-instagram fa-lg fa-fw"></i
                ></a>
              </li>
              <li
                class="list-inline-item border border-light rounded-circle text-center"
              >
                <a
                  class="text-light text-decoration-none"
                  target="_blank"
                  href="#"
                  ><i class="fab fa-twitter fa-lg fa-fw"></i
                ></a>
              </li>
              <li
                class="list-inline-item border border-light rounded-circle text-center"
              >
                <a
                  class="text-light text-decoration-none"
                  target="_blank"
                  href="#"
                  ><i class="fab fa-linkedin fa-lg fa-fw"></i
                ></a>
              </li>
            </ul>
          </div>
          <div class="col-auto">
            <label class="sr-only" for="subscribeEmail">Email address</label>
            <div class="input-group mb-2">
              <input
                type="text"
                class="form-control bg-dark border-light"
                id="subscribeEmail"
                placeholder="Email address"
              />
              <div class="input-group-text btn-success text-light">
                Subscribe
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="w-100 bg-black py-3">
        <div class="container">
          <div class="row pt-2">
            <div class="col-12">
              <p class="text-left text-light">
                © 2023 Company Name | Designed by Duvan Sarmiento
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src='{% static "js/jquery-1.11.0.min.js" %}'></script>
    <script src='{% static "js/jquery-migrate-1.2.1.min.js" %}'></script>
    <script src='{% static "js/templatemo.js" %}'></script>
    <script src='{% static "js/custom.js" %}'></script>
    <script>
      document.querySelectorAll(".btn-editar").forEach((boton) => {
        boton.addEventListener("click", function () {
          editarProducto(parseInt(this.dataset.id));
        });
      });

      document.querySelectorAll(".btn-eliminar").forEach((boton) => {
        boton.addEventListener("click", function () {
          const idProducto = this.dataset.id;
          if (confirm("¿Estás seguro de que deseas eliminar este producto?")) {
            eliminarProducto(idProducto);
          }
        });
      });

      function editarProducto(idProducto) {
        window.location.href = "/editar_producto/" + idProducto + "/";
      }

      function eliminarProducto(idProducto) {
        fetch("/eliminar_producto/" + idProducto + "/", {
          method: "POST",
          headers: {
            "X-CSRFToken": "{{ csrf_token }}",
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (response.ok) {
              location.reload();
            } else {
              console.error("Error al eliminar el producto");
            }
          })
          .catch((error) => {
            console.error("Error de red:", error);
          });
      }
    </script>
  </body>
</html>
